import {Injectable} from '@angular/core';
import {BehaviorSubject, Observable} from "rxjs";
import {Dish} from "./dish-card/dish-card.component";

@Injectable({
    providedIn: 'root'
})
export class DataService {
    private dishesSubj: BehaviorSubject<Dish[]>;
    public dishesObs: Observable<Dish[]>

    constructor() {
        this.dishesSubj = new BehaviorSubject<Dish[]>(this.prepareFirstData());
        this.dishesObs = this.dishesSubj.asObservable();
    }

    private prepareFirstData(): Dish[] {
        let JSONdata =
        JSON.parse(`[{"name":"Caprese salad (350g)","ingredients":"peeled tomatoes, mozzarella, pesto Genovese","imageUrl":"https://images.deliveryhero.io/image/fd-bg/Products/349960.jpg?width=%s","type":"main","price":9.99},{"name":"Caesar salad (400g)","ingredients":"iceberg, bacon, chicken breast, Parmesan, Caesar sauce","imageUrl":"https://images.deliveryhero.io/image/fd-bg/Products/349961.jpg?width=%s","type":"main","price":10.99},{"name":"XL salad (350g)","ingredients":"iceberg, arugula, cherry tomatoes, mozzarella, salad dressing (olive oil Extra Virgin, balsamic vinegar of Modena, honey and mustard)","imageUrl":"https://images.deliveryhero.io/image/fd-bg/Products/349962.jpg?width=%s","type":"main","price":9.99},{"name":"Green salad with tuna (400g)","ingredients":"lettuce, cucumber, tuna, olive, corn, lime, salad dressing (olive oil Extra Virgin, balsamic vinegar of Modena, honey and mustard)","imageUrl":"https://images.deliveryhero.io/image/fd-bg/Products/349964.jpg?width=%s","type":"main","price":9.99},{"name":"Green salad (350g)","ingredients":"lettuce, cucumbers, radishes, onions, egg, salad dressing (olive oil Extra Virgin, balsamic vinegar of Modena, honey and mustard)","imageUrl":"https://images.deliveryhero.io/image/fd-bg/Products/349965.jpg?width=%s","type":"main","price":7.99},{"name":"Greek salad (500g)","ingredients":"tomato, cucumber, green pepper, red onion, olive, Feta cheese, olive oil Extra Virgin","imageUrl":"https://images.deliveryhero.io/image/fd-bg/Products/349963.jpg?width=%s","type":"main","price":9.99},{"name":"Pizza Mozzarella","ingredients":"tomato sauce, mozzarella Sabelli, cherry tomatoes, olives, pesto sauce, olive oil Extra Virgin","imageUrl":"https://images.deliveryhero.io/image/fd-bg/Products/349984.jpg?width=%s","type":"main","price":8.2425},{"name":"Pizza Prosciutto Kruuda","ingredients":"tomato sauce, mozzarella Sabelli, prosciutto, arugula, olive oil Extra Virgin","imageUrl":"https://images.deliveryhero.io/image/fd-bg/Products/349985.jpg?width=%s","type":"main","price":11.2425},{"name":"Pizza Pepperoni","ingredients":"tomato sauce, mozzarella Sabelli, salami Calabro (spicy), Olive Oil Extra Virgin","imageUrl":"https://images.deliveryhero.io/image/fd-bg/Products/349988.jpg?width=%s","type":"main","price":11.2425},{"name":"Pizza Carriola","ingredients":"tomato sauce, mozzarella Sabelli, bacon, red onion, olives, olive oil Extra Virgin","imageUrl":"https://images.deliveryhero.io/image/fd-bg/Products/349989.jpg?width=%s","type":"main","price":11.2425},{"name":"Pizza Perugia","ingredients":"tomato sauce, mozzarella Sabelli, chicken fillet, red onions, fresh peppers, olive oil Extra Virgin","imageUrl":"https://images.deliveryhero.io/image/fd-bg/Products/349991.jpg?width=%s","type":"main","price":11.2425},{"name":"Pizza XL","ingredients":"tomato sauce, mozzarella Sabelli, ham, cherry tomatoes, Emmental, arugula, olive oil Extra Virgin","imageUrl":"https://images.deliveryhero.io/image/fd-bg/Products/349992.jpg?width=%s","type":"main","price":11.2425},{"name":"Pizza Margherita","ingredients":"tomato sauce, mozzarella Sabelli, Olive Oil Extra Virgin","imageUrl":"https://images.deliveryhero.io/image/fd-bg/Products/349983.jpg?width=%s","type":"main","price":7.8675},{"name":"Combo pizza 50/50 (70cm)","ingredients":"","imageUrl":"","type":"main","price":29.9925},{"name":"Pizza Capricciosa","ingredients":"tomato sauce, mozzarella Sabelli, ham, fresh mushrooms, olive oil Extra Virgin","imageUrl":"https://images.deliveryhero.io/image/fd-bg/Products/349986.jpg?width=%s","type":"main","price":11.2425},{"name":"Pizza Quattro Formaggi","ingredients":"cream (animal), mozzarella Sabelli, blue cheese, Emmental, Parmesan cheese, olive oil Extra Virgin","imageUrl":"https://images.deliveryhero.io/image/fd-bg/Products/349987.jpg?width=%s","type":"main","price":11.2425},{"name":"Pizza Marco Polo","ingredients":"tomato sauce, mozzarella Sabelli, chicken fillet, melt-smoked cheese, corn, olive oil Extra Virgin","imageUrl":"https://images.deliveryhero.io/image/fd-bg/Products/349990.jpg?width=%s","type":"main","price":11.2425},{"name":"Caprese salad (350g)","ingredients":"peeled tomatoes, mozzarella, pesto Genovese","imageUrl":"https://images.deliveryhero.io/image/fd-bg/Products/349960.jpg?width=%s","type":"main","price":9.99},{"name":"Caesar salad (400g)","ingredients":"iceberg, bacon, chicken breast, Parmesan, Caesar sauce","imageUrl":"https://images.deliveryhero.io/image/fd-bg/Products/349961.jpg?width=%s","type":"main","price":10.99},{"name":"XL salad (350g)","ingredients":"iceberg, arugula, cherry tomatoes, mozzarella, salad dressing (olive oil Extra Virgin, balsamic vinegar of Modena, honey and mustard)","imageUrl":"https://images.deliveryhero.io/image/fd-bg/Products/349962.jpg?width=%s","type":"main","price":9.99},{"name":"Green salad with tuna (400g)","ingredients":"lettuce, cucumber, tuna, olive, corn, lime, salad dressing (olive oil Extra Virgin, balsamic vinegar of Modena, honey and mustard)","imageUrl":"https://images.deliveryhero.io/image/fd-bg/Products/349964.jpg?width=%s","type":"main","price":9.99},{"name":"Green salad (350g)","ingredients":"lettuce, cucumbers, radishes, onions, egg, salad dressing (olive oil Extra Virgin, balsamic vinegar of Modena, honey and mustard)","imageUrl":"https://images.deliveryhero.io/image/fd-bg/Products/349965.jpg?width=%s","type":"main","price":7.99},{"name":"Greek salad (500g)","ingredients":"tomato, cucumber, green pepper, red onion, olive, Feta cheese, olive oil Extra Virgin","imageUrl":"https://images.deliveryhero.io/image/fd-bg/Products/349963.jpg?width=%s","type":"main","price":9.99},{"name":"Spaghetti Carbonara (450g)","ingredients":"fresh pasta, cream (animal), onion, pancetta (smoked bacon), egg, Parmesan","imageUrl":"https://images.deliveryhero.io/image/fd-bg/Products/349966.jpg?width=%s","type":"spaghetti","price":11.99},{"name":"Spaghetti Formaggi (450g)","ingredients":"fresh pasta, cream (animal), blue cheese, Emmental, Parmesan","imageUrl":"https://images.deliveryhero.io/image/fd-bg/Products/349967.jpg?width=%s","type":"spaghetti","price":11.99},{"name":"Tagliatelle with porcini mushrooms (400g)","ingredients":"fresh pasta, cream (animal), porcini mushrooms, parmesan","imageUrl":"https://images.deliveryhero.io/image/fd-bg/Products/349968.jpg?width=%s","type":"spaghetti","price":11.99},{"name":"Risotto with chicken (450g)","ingredients":"Arborio rice, chicken breast, onion, parmesan","imageUrl":"https://images.deliveryhero.io/image/fd-bg/Products/349970.jpg?width=%s","type":"spaghetti","price":11.99},{"name":"Risotto with porcini mushrooms (450g)","ingredients":"Arborio rice, porcini mushrooms, garlic, Parmesan","imageUrl":"https://images.deliveryhero.io/image/fd-bg/Products/349971.jpg?width=%s","type":"spaghetti","price":11.99},{"name":"Tagliatelle with Bolognese sauce (400g)","ingredients":"fresh pasta, Bolognese sauce, parmesan","imageUrl":"https://images.deliveryhero.io/image/fd-bg/Products/349969.jpg?width=%s","type":"spaghetti","price":11.99},{"name":"Mineral water San-Benedetto","ingredients":"","imageUrl":"","type":"drinks","price":1.49},{"name":"Airan Verea","ingredients":"","imageUrl":"","type":"drinks","price":1.49},{"name":"Coca-Cola Original Taste (330ml)","ingredients":"The most popular soft drink with a unique and refreshing Coca-Cola taste with natural flavors and no added preservatives.","imageUrl":"https://images.deliveryhero.io/image/fd-bg/Products/349993.jpg?width=%s","type":"drinks","price":1.49},{"name":"Fanta Orange (330ml)","ingredients":"Fanta Orange is a fizzy soft drink with orange juice. Challenge your senses and taste the fun!","imageUrl":"https://images.deliveryhero.io/image/fd-bg/Products/1058358.jpg?width=%s","type":"drinks","price":1.49},{"name":"Zagorka","ingredients":"","imageUrl":"","type":"drinks","price":2.49},{"name":"Amstel","ingredients":"","imageUrl":"","type":"drinks","price":2.99},{"name":"Heineken","ingredients":"","imageUrl":"","type":"drinks","price":2.99},{"name":"Kozel","ingredients":"can","imageUrl":"","type":"drinks","price":3.99},{"name":"Pilsner Urquell","ingredients":"can","imageUrl":"","type":"drinks","price":3.99},{"name":"Estrela","ingredients":"can","imageUrl":"","type":"drinks","price":3.99},{"name":"Radenberger","ingredients":"","imageUrl":"","type":"drinks","price":3.99},{"name":"Schofferhofer","ingredients":"can","imageUrl":"","type":"drinks","price":3.99},{"name":"Tiramisu","ingredients":"tiramisu creme with mascarpone and spongecake dough with coffee taste","imageUrl":"","type":"deserts","price":3.99},{"name":"Profiteroles (90g)","ingredients":"profiteroli, Lindt chocolate cream, liqueur","imageUrl":"","type":"deserts","price":3.99},{"name":"Тартуфо (90g)","ingredients":"cocoa cream with liqueur","imageUrl":"","type":"deserts","price":3.99}]`);
        return JSONdata;
    }

    public updateDishesArray(newArray: Dish[]) {
        this.dishesSubj.next(newArray);
    }
}
